<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Data auditing: Get started • jfa</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Data auditing: Get started">
<meta property="og:description" content="jfa">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">jfa</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.6.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/jfa.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/v1-audit-sampling.html">Audit sampling: Get started</a>
    </li>
    <li>
      <a href="../articles/v2-audit-sampling-workflow.html">Audit sampling: Classical sampling workflow</a>
    </li>
    <li>
      <a href="../articles/v3-audit-sampling-bayesian-workflow.html">Audit sampling: Bayesian sampling workflow</a>
    </li>
    <li>
      <a href="../articles/v4-audit-sampling-prior-distributions.html">Audit sampling: Creating a prior distribution</a>
    </li>
    <li>
      <a href="../articles/v5-audit-sampling-sample-selection.html">Audit sampling: Selecting a sample</a>
    </li>
    <li>
      <a href="../articles/v6-audit-sampling-evaluation.html">Audit sampling: Evaluating a sample</a>
    </li>
    <li>
      <a href="../articles/v7-data-auditing.html">Data auditing: Get started</a>
    </li>
    <li>
      <a href="../articles/v8-auditing-data-digit-analysis.html">Auditing data: Digit analysis</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/koenderks/jfa/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Data auditing: Get started</h1>
                        <h4 data-toc-skip class="author">Koen Derks</h4>
            
            <h4 data-toc-skip class="date">last modified:
05-11-2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/koenderks/jfa/blob/HEAD/vignettes/v7-data-auditing.Rmd" class="external-link"><code>vignettes/v7-data-auditing.Rmd</code></a></small>
      <div class="hidden name"><code>v7-data-auditing.Rmd</code></div>

    </div>

    
    
<p>Welcome to the ‘Data auditing’ vignette of the <code>jfa</code>
package. Here you can find a simple explanation of the functions in the
package that facilitate data auditing. For more detailed explanations of
each function, read the other vignettes on the <a href="https://koenderks.github.io/jfa" class="external-link">package website</a>.</p>
<div class="section level2">
<h2 id="functions-and-intended-usage">1. Functions and intended usage<a class="anchor" aria-label="anchor" href="#functions-and-intended-usage"></a>
</h2>
<p>Below you can find an explanation of the available data auditing
functions in <code>jfa</code>.</p>
<ul>
<li><a href="#test-digit-distributions-with-digit-test"><code>digit.test()</code></a></li>
<li><a href="#test-for-repeated-values-with-repeated-test"><code>repeated.test()</code></a></li>
</ul>
<div class="section level3">
<h3 id="test-digit-distributions-with-digit-test">Test digit distributions with <code>digit.test()</code><a class="anchor" aria-label="anchor" href="#test-digit-distributions-with-digit-test"></a>
</h3>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></p>
<p>The function <code><a href="../reference/digit.test.html">digit.test()</a></code> takes a vector of numeric
values, extract the requested digits, and compares the frequencies of
these digits to a reference distribution. By default, the function
performs a frequentist hypothesis test of the null hypothesis that the
digits are distributed according to the reference distribution and
produces a <em>p</em> value. When a prior is specified, the function
performs a Bayesian hypothesis test of the null hypothesis that the
digits are distributed according to the reference distribution against
the alternative hypothesis that the digits are not distributed according
to the reference distribution and produces a Bayes factor (Kass &amp;
Raftery, 1995).</p>
<p><em>Full function with default arguments:</em></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/digit.test.html">digit.test</a></span><span class="op">(</span><span class="va">x</span>, check <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'first'</span>, <span class="st">"last"</span>, <span class="st">"firsttwo"</span><span class="op">)</span>, reference <span class="op">=</span> <span class="st">'benford'</span>, prior <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><em>Supported options for the <code>check</code> argument:</em></p>
<table class="table">
<thead><tr class="header">
<th align="left"><code>check</code></th>
<th align="left">Returns</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>fist</code></td>
<td align="left">First digit</td>
</tr>
<tr class="even">
<td align="left"><code>firsttwo</code></td>
<td align="left">First and second digit</td>
</tr>
<tr class="odd">
<td align="left"><code>last</code></td>
<td align="left">Last digit</td>
</tr>
</tbody>
</table>
<p><em>Supported options for the <code>reference</code>
argument:</em></p>
<table class="table">
<thead><tr class="header">
<th align="left"><code>check</code></th>
<th align="left">Returns</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>benford</code></td>
<td align="left">Benford’s law</td>
</tr>
<tr class="even">
<td align="left"><code>uniform</code></td>
<td align="left">Uniform distribution</td>
</tr>
<tr class="odd">
<td align="left">Vector of probabilities</td>
<td align="left">Custom distribution</td>
</tr>
</tbody>
</table>
<p><em>Example usage:</em></p>
<p>Benford’s law (Benford, 1938) is a principle that describes a pattern
in many naturally-occurring numbers. According to Benford’s law, each
possible leading digit <em>d</em> in a naturally occurring, or
non-manipulated, set of numbers occurs with a probability:</p>
<p><img src="https://latex.codecogs.com/svg.image?p(d_i)&amp;space;=&amp;space;%5Ctext%7Blog%7D_%7B10%7D(1&amp;space;+&amp;space;%5Cfrac%7B1%7D%7Bd_i%7D)" title="p(d_i) = \text{log}_{10}(\frac{1}{d_i})"></p>
<p>The distribution of leading digits in a data set of financial
transaction values (e.g., the <code>sinoForest</code> data) can be
extracted and tested against the expected frequencies under Benford’s
law using the code below.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Frequentist hypothesis test</span></span>
<span><span class="fu"><a href="../reference/digit.test.html">digit.test</a></span><span class="op">(</span><span class="va">sinoForest</span><span class="op">$</span><span class="va">value</span>, check <span class="op">=</span> <span class="st">"first"</span>, reference <span class="op">=</span> <span class="st">"benford"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Digit distribution test</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## data:  sinoForest$value</span></span>
<span><span class="co">## n = 772, X-squared = 7.6517, df = 8, p-value = 0.4682</span></span>
<span><span class="co">## alternative hypothesis: leading digit(s) are not distributed according to the benford distribution.</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Bayesian hypothesis test using default prior</span></span>
<span><span class="fu"><a href="../reference/digit.test.html">digit.test</a></span><span class="op">(</span><span class="va">sinoForest</span><span class="op">$</span><span class="va">value</span>, check <span class="op">=</span> <span class="st">"first"</span>, reference <span class="op">=</span> <span class="st">"benford"</span>, prior <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Digit distribution test</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## data:  sinoForest$value</span></span>
<span><span class="co">## n = 772, BF10 = 1.4493e-07</span></span>
<span><span class="co">## alternative hypothesis: leading digit(s) are not distributed according to the benford distribution.</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="test-for-repeated-values-with-repeated-test">Test for repeated values with <code>repeated.test()</code><a class="anchor" aria-label="anchor" href="#test-for-repeated-values-with-repeated-test"></a>
</h3>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></p>
<p>The function <code><a href="../reference/repeated.test.html">repeated.test()</a></code> analyzes the frequency with
which values get repeated within a set of numbers. Unlike Benford’s law,
and its generalizations, this approach examines the entire number at
once, not only the first or last digit. For the technical details of
this procedure, see Simohnsohn (2019).</p>
<p><em>Full function with default arguments:</em></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/repeated.test.html">repeated.test</a></span><span class="op">(</span><span class="va">x</span>, check <span class="op">=</span> <span class="st">'last'</span>, method <span class="op">=</span> <span class="st">'af'</span>, B <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span></span></code></pre></div>
<p><em>Supported options for the <code>check</code> argument:</em></p>
<table class="table">
<thead><tr class="header">
<th align="left"><code>check</code></th>
<th align="left">Returns</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>last</code></td>
<td align="left">Last decimal</td>
</tr>
<tr class="even">
<td align="left"><code>lasttwo</code></td>
<td align="left">Last two decimals</td>
</tr>
<tr class="odd">
<td align="left"><code>all</code></td>
<td align="left">All decimals</td>
</tr>
</tbody>
</table>
<p><em>Supported options for the <code>method</code> argument:</em></p>
<table class="table">
<thead><tr class="header">
<th align="left"><code>check</code></th>
<th align="left">Returns</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>af</code></td>
<td align="left">Average frequency</td>
</tr>
<tr class="even">
<td align="left"><code>entropy</code></td>
<td align="left">Entropy</td>
</tr>
</tbody>
</table>
<p><em>Example usage:</em></p>
<p>In this example, we analyze a data set from a (retracted) paper that
describes three experiments run in Chinese factories, where workers were
nudged to use more hand-sanitizer. These data were shown to exhibited
two classic markers of data tampering: impossibly similar means and the
uneven distribution of last digits (Yu, Nelson, &amp; Simohnson, 2018).
We can use the <code>rv.test()</code> function to test if these data
also contain a greater amount of repeated values than expected if the
data were not tampered with.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/repeated.test.html">repeated.test</a></span><span class="op">(</span><span class="va">sanitizer</span><span class="op">$</span><span class="va">value</span>, check <span class="op">=</span> <span class="st">"lasttwo"</span>, B <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Repeated values test</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## data:  sanitizer$value</span></span>
<span><span class="co">## n = 1600, AF = 1.5225, p-value = 0.0034</span></span>
<span><span class="co">## alternative hypothesis: average frequency in data is greater than for random data.</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="benchmarks">2. Benchmarks<a class="anchor" aria-label="anchor" href="#benchmarks"></a>
</h2>
<p>To validate the statistical results, <code>jfa</code>’s automated <a href="https://github.com/koenderks/jfa/tree/development/tests/testthat" class="external-link">unit
tests</a> regularly verify the main output from the package against the
following benchmarks:</p>
<ul>
<li>
<a href="https://cran.r-project.org/package=benford.analysis" class="external-link">benford.analysis</a>
(R package version 0.1.5)</li>
<li>
<a href="https://cran.r-project.org/package=BenfordTests" class="external-link">BenfordTests</a>
(R package version 1.2.0)</li>
<li>
<a href="https://cran.r-project.org/package=BeyondBenford" class="external-link">BeyondBenford</a>
(R package version 1.4)</li>
</ul>
</div>
<div class="section level2">
<h2 id="references">3. References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>Benford, F. (1938). The law of anomalous numbers. In <em>Proceedings
of the American Philosophical Society</em>, 551-572. - <a href="https://www.jstor.org/stable/984802" class="external-link">View online</a>
</li>
<li>Kass, R. E., &amp; Raftery, A. E. (1995). Bayes factors. <em>Journal
of the American Statistical Association</em>, <em>90</em>(430), 773-795.
- <a href="https://www.tandfonline.com/doi/abs/10.1080/01621459.1995.10476572" class="external-link">View
online</a>
</li>
<li>Simohnsohn, U. (2019, May 25). <em>Number-Bunching: A New Tool for
Forensic Data Analysis</em>. - <a href="https://datacolada.org/77" class="external-link">View
online</a>
</li>
<li>Yo, F., Nelson, L., &amp; Simonsohn, U. (2018, December 5). <em>In
Press at Psychological Science: A New ‘Nudge’ Supported by Implausible
Data</em>. - <a href="https://datacolada.org/74" class="external-link">View online</a>
</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Koen Derks.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
