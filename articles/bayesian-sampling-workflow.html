<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Walkthrough of the Bayesian audit sampling workflow • jfa</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Walkthrough of the Bayesian audit sampling workflow">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">jfa</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.7.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="../articles/jfa.html">Get started</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/koenderks/jfa" class="external-link">
    <span class="fa fa-github"></span>

  </a>
</li>
<li>
  <a href="https://github.com/koenderks/jfa/discussions" class="external-link">
    <span class="fa fa-users"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Walkthrough of the Bayesian audit sampling
workflow</h1>
                        <h4 data-toc-skip class="author">Koen Derks</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/koenderks/jfa/blob/development/vignettes/articles/bayesian-sampling-workflow.Rmd" class="external-link"><code>vignettes/articles/bayesian-sampling-workflow.Rmd</code></a></small>
      <div class="hidden name"><code>bayesian-sampling-workflow.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Welcome to the ‘Walkthrough of the Bayesian audit sampling workflow’
vignette of the <strong>jfa</strong> package. This page aims to
demonstrate how the package can assist auditors in the standard audit
sampling workflow (hereafter referred to as “audit workflow”) in a
Bayesian fashion.</p>
<p>In this audit workflow example, we will be looking at a hypothetical
scenario involving BuildIt, a fictitious construction company based in
the United States. BuildIt is undergoing an audit by an external auditor
from a fictional audit firm. At the end of the fiscal year, BuildIt has
presented a summary of its financial status in its financial statements.
The objective of the auditor is to form an opinion on the fairness of
BuildIt’s financial statements. The auditor’s opinion should be
compliant with professional auditing standards <span class="citation">(American Institute of Certified Public Accountants
(AICPA), 2021; International Auditing and Assurance Standards Board
(IAASB), 2018; Public Company Accounting Oversight Board (PCAOB),
2020)</span>.</p>
<p>The auditor is required to gather appropriate and sufficient evidence
to support the hypothesis that the misstatement in the financial
statements is less than a specified amount, known as the materiality. If
the financial statements contain material misstatements, this means that
the inaccuracies in the financial statements are substantial enough to
influence the decisions of stakeholders who depend on these financial
statements. For this example, the overall materiality of the financial
statements is set to ten percent. This implies that for the auditor to
endorse the financial statements, inaccuracies in the financial
statements should not exceed ten percent.</p>
<p>During an audit, the auditor examines the populations that underpin
the line items in the financial statement. In this vignette, we
concentrate on the <code>BuildIt</code> data set that is included in the
package, which contains
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>
= 3500 invoices from the BuildIt’s rental account. The data can be
loaded in R via <code>data("BuildIt")</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"BuildIt"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">BuildIt</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##      ID bookValue auditValue</span></span>
<span><span class="co">## 1 82884    242.61     242.61</span></span>
<span><span class="co">## 2 25064    642.99     642.99</span></span>
<span><span class="co">## 3 81235    628.53     628.53</span></span>
<span><span class="co">## 4 71769    431.87     431.87</span></span>
<span><span class="co">## 5 55080    620.88     620.88</span></span>
<span><span class="co">## 6 93224    501.76     501.76</span></span></code></pre>
<p>For this population, the auditor determines the performance
materiality, which is the degree of materiality that applies to this
specific population. In this case, the performance materiality is
established at fifty percent of the overall materiality, or five
percent. This implies that for the auditor to endorse the population,
the misstatement in the population should not exceed five percent.</p>
<p>To form an opinion about the misstatement in the population, the
auditor typically divides their audit workflow into four stages.
Initially, they need to plan the minimum sample size they need to
examine to make inferences about the population. Next, they have to
select the required sample from the population. Subsequently, they need
to inspect the selected sample and determine the audit (i.e., true)
value of the items it comprises. Finally, they must use the information
from the audited sample to make inferences about the misstatement in the
population.</p>
<p align="center">
<img src="workflow.png" alt="workflow" width="100%"></p>
</div>
<div class="section level2">
<h2 id="setting-up-the-audit">Setting up the audit<a class="anchor" aria-label="anchor" href="#setting-up-the-audit"></a>
</h2>
<p>The auditor aims to assert that, with 95 percent confidence, the
misstatement in the population is less than the performance materiality
of five percent. Drawing from last year’s audit at BuildIt, where the
upper limit of the misstatement was found to be 2.5 percent, they are
willing to accept a maximum of 2.5 percent misstatements in the intended
sample. Consequently, the auditor can rephrase their statistical
statement as wanting to conclude that, if 2.5 percent misstatements are
detected in the sample, they can determine with 95 percent confidence
that the misstatement in the population is less than the performance
materiality of five percent.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">confidence</span> <span class="op">&lt;-</span> <span class="fl">0.95</span> <span class="co"># Confidence level = 95%</span></span>
<span><span class="va">materiality</span> <span class="op">&lt;-</span> <span class="fl">0.05</span> <span class="co"># Performance materiality = 5%</span></span>
<span><span class="va">expected</span> <span class="op">&lt;-</span> <span class="fl">0.025</span> <span class="co"># Tolerable sample errors = 2.5%</span></span></code></pre></div>
<p>Many audits are conducted according to the audit risk model (ARM),
which posits that the overall uncertainty about the auditor’s statement
(1 - confidence) is a product of three components: inherent risk,
control risk, and detection risk.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Audit risk</mtext><mo>=</mo><mtext mathvariant="normal">Inherent risk</mtext><mspace width="0.167em"></mspace><mo>×</mo><mspace width="0.167em"></mspace><mtext mathvariant="normal">Control risk</mtext><mspace width="0.167em"></mspace><mo>×</mo><mspace width="0.167em"></mspace><mtext mathvariant="normal">Detection risk</mtext></mrow><annotation encoding="application/x-tex">\begin{equation}
  \text{Audit risk} = \text{Inherent risk} \,\times\, \text{Control risk} \,\times\, \text{Detection risk}
\end{equation}</annotation></semantics></math></p>
<ul>
<li>Inherent risk refers to the risk of a material error occurring in
BuildIt’s financial statement before considering any related control
systems (e.g., computer systems).</li>
<li>Control risk is the risk that BuildIt’s internal control systems
fail to prevent or detect a material misstatement.</li>
<li>Detection risk is the risk that the auditor will not discover
material misstatements that exist in BuildIt’s financial
statements.</li>
</ul>
<p>The ARM is practically useful because for a given level of audit
risk, the tolerable detection risk is inversely proportional to the
other two risks. Hence, the ARM can be beneficial for the auditor as it
allows them to reduce the amount of audit evidence required from the
sample in the presence of risk-reducing information.</p>
<p>Typically, auditors assess inherent risk and control risk on a
three-point scale: low, medium, or high. Different audit firms may
assign different standard percentages to these categories. In the
auditor’s firm, the probabilities for low, medium, and high are defined
as 50 percent, 60 percent, and 100 percent, respectively. After
evaluating BuildIt’s internal control systems, the auditor has
classified the internal control risk as medium (60 percent), while they
have determined the inherent risk to be high (100 percent).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ir</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="co"># Inherent risk = 100%</span></span>
<span><span class="va">cr</span> <span class="op">&lt;-</span> <span class="fl">0.6</span> <span class="co"># Control risk = 60%</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="stage-1-planning-an-audit-sample">Stage 1: Planning an audit sample<a class="anchor" aria-label="anchor" href="#stage-1-planning-an-audit-sample"></a>
</h2>
<p align="center">
<img src="planning.png" alt="planning" width="100%"></p>
<p>In a Bayesian audit, the initial step for the auditor is to define
the prior distribution that aligns with their assessment of the inherent
risk and control risk. They can create a prior distribution that
integrates the information from the risk assessments in the ARM using
the <code><a href="../reference/auditPrior.html">auditPrior()</a></code> function. For more details on how this is
accomplished, we refer to <span class="citation">Derks et al.
(2021)</span>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auditPrior.html">auditPrior</a></span><span class="op">(</span></span>
<span>  method <span class="op">=</span> <span class="st">"arm"</span>, ir <span class="op">=</span> <span class="va">ir</span>, cr <span class="op">=</span> <span class="va">cr</span>,</span>
<span>  likelihood <span class="op">=</span> <span class="st">"poisson"</span>, materiality <span class="op">=</span> <span class="va">materiality</span>, expected <span class="op">=</span> <span class="va">expected</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The prior distribution can be visualized via the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>
function.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">prior</span><span class="op">)</span></span></code></pre></div>
<p><img src="bayesian-sampling-workflow_files/figure-html/unnamed-chunk-6-1.png" width="576" style="display: block; margin: auto;"></p>
<p>With the prior distribution now defined, the auditor can determine
the necessary sample size for their intended inference using the
<code><a href="../reference/planning.html">planning()</a></code> function. They use the <code>prior</code> object
as an input for the <code><a href="../reference/planning.html">planning()</a></code> function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stage1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/planning.html">planning</a></span><span class="op">(</span></span>
<span>  materiality <span class="op">=</span> <span class="va">materiality</span>, expected <span class="op">=</span> <span class="va">expected</span>,</span>
<span>  conf.level <span class="op">=</span> <span class="va">confidence</span>, prior <span class="op">=</span> <span class="va">prior</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The auditor can then examine the outcome of their planning procedure
using the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function. The results indicate that,
given the prior distribution, the auditor needs to select a sample of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
= 178 items. This ensures that if a maximum of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>
= 4.45 misstatements are found, they can assert with 95 percent
confidence that the misstatement in BuildIt’s financial statements is
less than the performance materiality of five percent.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">stage1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Bayesian Audit Sample Planning Summary</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Options:</span></span>
<span><span class="co">##   Confidence level:              0.95 </span></span>
<span><span class="co">##   Materiality:                   0.05 </span></span>
<span><span class="co">##   Hypotheses:                    H₀: Θ &gt; 0.05 vs. H₁: Θ &lt; 0.05 </span></span>
<span><span class="co">##   Expected:                      0.025 </span></span>
<span><span class="co">##   Likelihood:                    poisson </span></span>
<span><span class="co">##   Prior distribution:            gamma(α = 2.325, β = 53) </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Results:</span></span>
<span><span class="co">##   Minimum sample size:           178 </span></span>
<span><span class="co">##   Tolerable errors:              4.45 </span></span>
<span><span class="co">##   Posterior distribution:        gamma(α = 6.775, β = 231) </span></span>
<span><span class="co">##   Expected most likely error:    0.025 </span></span>
<span><span class="co">##   Expected upper bound:          0.049981 </span></span>
<span><span class="co">##   Expected precision:            0.024981 </span></span>
<span><span class="co">##   Expected BF₁₀:                 9.6614</span></span></code></pre>
<p>The auditor can examine how the prior distribution compares to the
expected posterior distribution by using the <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>
function. The expected posterior distribution is the posterior
distribution that would result if the auditor were to actually observe a
sample of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
= 178 items, with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>
= 4.45 of them being misstated.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">stage1</span><span class="op">)</span></span></code></pre></div>
<p><img src="bayesian-sampling-workflow_files/figure-html/unnamed-chunk-9-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="stage-2-selecting-a-sample">Stage 2: Selecting a sample<a class="anchor" aria-label="anchor" href="#stage-2-selecting-a-sample"></a>
</h2>
<p align="center">
<img src="selection.png" alt="selection" width="100%"></p>
<p>The auditor is now prepared to select the required
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>
= 178 items from the population. They have two statistical methods to
choose from for this task. In record sampling
(<code>units = "items"</code>), inclusion probabilities are assigned at
the item level, treating items of high and low value equally. This means
an item of $5,000 is just as likely to be selected as an item of $1,000.
In monetary unit sampling (<code>units = "values"</code>), inclusion
probabilities are assigned at the level of individual monetary units
(e.g., a dollar). When a dollar is selected to be in the sample, the
item that includes that dollar is selected. This method favors items
with a higher value, as an item with a value of $5,000 is now five times
more likely to be selected than an item with a value of $1,000.</p>
<p>The auditor opts to use monetary unit sampling, as they want to
include more high-valued items. The <code><a href="../reference/selection.html">selection()</a></code> function
enables them to select the sample from the population using this
sampling scheme. They use the <code>stage1</code> object as input for
the <code>size</code> argument in the <code><a href="../reference/selection.html">selection()</a></code> function,
as this passes the calculated sample size from the planning stage
directly to the function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stage2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/selection.html">selection</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">BuildIt</span>, size <span class="op">=</span> <span class="va">stage1</span>,</span>
<span>  units <span class="op">=</span> <span class="st">"values"</span>, values <span class="op">=</span> <span class="st">"bookValue"</span>, method <span class="op">=</span> <span class="st">"interval"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Like before, the auditor can examine the results of their sampling
procedure using the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">stage2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Audit Sample Selection Summary</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Options:</span></span>
<span><span class="co">##   Requested sample size:         178 </span></span>
<span><span class="co">##   Sampling units:                monetary units </span></span>
<span><span class="co">##   Method:                        fixed interval sampling </span></span>
<span><span class="co">##   Starting point:                1 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Data:</span></span>
<span><span class="co">##   Population size:               3500 </span></span>
<span><span class="co">##   Population value:              1403221 </span></span>
<span><span class="co">##   Selection interval:            7883.3 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Results:</span></span>
<span><span class="co">##   Selected sampling units:       178 </span></span>
<span><span class="co">##   Proportion of value:           0.062843 </span></span>
<span><span class="co">##   Selected items:                178 </span></span>
<span><span class="co">##   Proportion of size:            0.050857</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="stage-3-executing-the-audit">Stage 3: Executing the audit<a class="anchor" aria-label="anchor" href="#stage-3-executing-the-audit"></a>
</h2>
<p>The selected sample can be singled out by indexing the
<code>$sample</code> object from the sampling result.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="va">stage2</span><span class="op">$</span><span class="va">sample</span></span></code></pre></div>
<p>Next, the auditor can carry out the audit by annotating the items in
the sample with their audit values. This can be done, for example, by
writing the sample to a csv file using <code><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv()</a></code>. The
annotated sample can then be loaded back into the R session for further
evaluation.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Write the sample to a .csv file:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">sample</span>, file <span class="op">=</span> <span class="st">"auditSample.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load annotated sample back into R:</span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"auditSample.csv"</span><span class="op">)</span></span></code></pre></div>
<p>In the case of the <code>BuildIt</code> data set, the audit values of
the sample items are already provided in the <code>auditValue</code>
column of the data set.</p>
</div>
<div class="section level2">
<h2 id="stage-4-evaluating-the-sample">Stage 4: Evaluating the sample<a class="anchor" aria-label="anchor" href="#stage-4-evaluating-the-sample"></a>
</h2>
<p align="center">
<img src="evaluation.png" alt="evaluation" width="100%"></p>
<p>With the annotated sample, the auditor can perform inference about
the misstatement in the population using the <code><a href="../reference/evaluation.html">evaluation()</a></code>
function. By supplying the <code>prior</code> object to the function, it
automatically sets <code>method = "binomial"</code> to align with the
prior distribution.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stage4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/evaluation.html">evaluation</a></span><span class="op">(</span></span>
<span>  materiality <span class="op">=</span> <span class="va">materiality</span>, conf.level <span class="op">=</span> <span class="va">confidence</span>, data <span class="op">=</span> <span class="va">sample</span>,</span>
<span>  values <span class="op">=</span> <span class="st">"bookValue"</span>, values.audit <span class="op">=</span> <span class="st">"auditValue"</span>, prior <span class="op">=</span> <span class="va">prior</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The outcomes of their inference can be examined by the auditor using
the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function. The upper bound on the population
misstatement is 2.278 percent, which is below the performance
materiality of five percent. Hence, the auditor can conclude that there
is a 95 percent probability that the misstatement in BuildIt’s
population is less than 2.278 percent.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">stage4</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##  Bayesian Audit Sample Evaluation Summary</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Options:</span></span>
<span><span class="co">##   Confidence level:               0.95 </span></span>
<span><span class="co">##   Materiality:                    0.05 </span></span>
<span><span class="co">##   Hypotheses:                     H₀: Θ &gt; 0.05 vs. H₁: Θ &lt; 0.05 </span></span>
<span><span class="co">##   Method:                         poisson </span></span>
<span><span class="co">##   Prior distribution:             gamma(α = 2.325, β = 53) </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Data:</span></span>
<span><span class="co">##   Sample size:                    178 </span></span>
<span><span class="co">##   Number of errors:               0 </span></span>
<span><span class="co">##   Sum of taints:                  0 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Results:</span></span>
<span><span class="co">##   Posterior distribution:         gamma(α = 2.325, β = 231) </span></span>
<span><span class="co">##   Most likely error:              0.0057359 </span></span>
<span><span class="co">##   95 percent credible interval:   [0, 0.022781] </span></span>
<span><span class="co">##   Precision:                      0.017045 </span></span>
<span><span class="co">##   BF₁₀:                            2179.8</span></span></code></pre>
<p>The prior and posterior distribution can be inspected using the
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">stage4</span>, type <span class="op">=</span> <span class="st">"posterior"</span><span class="op">)</span></span></code></pre></div>
<p><img src="bayesian-sampling-workflow_files/figure-html/unnamed-chunk-16-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>As the 95 percent upper credible bound on the misstatement in the
population is lower than the performance materiality, the auditor has
gathered sufficient evidence to conclude that the population does not
contain material misstatement.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0" line-spacing="2">
<div id="ref-aicpa_2021" class="csl-entry">
American Institute of Certified Public Accountants (AICPA). (2021).
<em>Clarified statements on auditing standards</em>. <span>American
Institute of Certified Public Accountants (<span>AICPA</span>)</span>.
</div>
<div id="ref-derks_2021" class="csl-entry">
Derks, K., Swart, J. de, Batenburg, P. van, Wagenmakers, E.-J., &amp;
Wetzels, R. (2021). Priors in a <span>B</span>ayesian audit: How
integration of existing information into the prior distribution can
improve audit transparency and efficiency. <em>International Journal of
Auditing</em>, <em>25</em>(3), 621–636. <a href="https://doi.org/10.1111/ijau.12240" class="external-link">https://doi.org/10.1111/ijau.12240</a>
</div>
<div id="ref-iaasb_2018" class="csl-entry">
International Auditing and Assurance Standards Board (IAASB). (2018).
<em>Handbook of international quality control, auditing review, other
assurance, and related services pronouncements (vol. i)</em>.
<span>International Federation of Accountants</span>.
</div>
<div id="ref-pcaob_2020" class="csl-entry">
Public Company Accounting Oversight Board (PCAOB). (2020). <em>Auditing
standards</em>. <span>Public Company Accounting Oversight Board
(<span>PCAOB</span>)</span>.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://koenderks.com" class="external-link">Koen Derks</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
