<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Audit Sampling: Planning — planning • jfa</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Audit Sampling: Planning — planning"><meta property="og:description" content="planning() is used to calculate a minimum sample size for
audit samples. It allows specification of statistical requirements for the
sample with respect to the performance materiality or the precision. The
function returns an object of class jfaPlanning that can be used with
associated summary() and plot() methods."><meta property="og:image" content="https://koenderks.github.io/jfa/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">jfa</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.7.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/jfa.html">Get started</a>
</li>
<li>
  <a href="../articles/index.html">Vignettes</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/koenderks/jfa" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/koenderks/jfa/discussions" class="external-link">
    <span class="fa fa-users"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Audit Sampling: Planning</h1>
    <small class="dont-index">Source: <a href="https://github.com/koenderks/jfa/blob/HEAD/R/planning.R" class="external-link"><code>R/planning.R</code></a></small>
    <div class="hidden name"><code>planning.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>planning()</code> is used to calculate a minimum sample size for
audit samples. It allows specification of statistical requirements for the
sample with respect to the performance materiality or the precision. The
function returns an object of class <code>jfaPlanning</code> that can be used with
associated <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> and <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> methods.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">planning</span><span class="op">(</span></span>
<span>  materiality <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min.precision <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  expected <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  likelihood <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"poisson"</span>, <span class="st">"binomial"</span>, <span class="st">"hypergeometric"</span><span class="op">)</span>,</span>
<span>  conf.level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  N.units <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  by <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  max <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>  prior <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>materiality</dt>
<dd><p>a numeric value between 0 and 1 specifying the
performance materiality (i.e., the maximum tolerable misstatement in the
population) as a fraction. Can be <code>NULL</code>, but <code>min.precision</code>
should be specified in that case.</p></dd>


<dt>min.precision</dt>
<dd><p>a numeric value between 0 and 1 specifying the minimum
precision (i.e., the estimated upper bound minus the estimated most likely
error) as a fraction. Can be <code>NULL</code>, but <code>materiality</code> should be
specified in that case.</p></dd>


<dt>expected</dt>
<dd><p>a numeric value between 0 and 1 specifying the expected
(tolerable) misstatements in the sample relative to the total sample size,
or a number (&gt;= 1) specifying the expected (tolerable) number of
misstatements in the sample. It is advised to set this value conservatively
to minimize the probability of the observed misstatements in the sample
exceeding the expected misstatements, which would imply that insufficient
work has been done in the end and that additional samples are required.
This argument also facilitates sequential sampling plans since it can also
be a vector (e.g., <code>c(1, 0)</code>) of tolerable misstatements in each stage
of the audit sample. Hence, <code>c(1, 0)</code> gives the sample size for a
sequential sampling plan in which the auditor can stop after seeing 0
misstatements in the first sample, but can extend the sample if more than
0 misstatements are found.</p></dd>


<dt>likelihood</dt>
<dd><p>a character specifying the likelihood of the data.
Possible options are <code>poisson</code> (default) for the Poisson likelihood,
<code>binomial</code> for the binomial likelihood, or <code>hypergeometric</code> for
the hypergeometric likelihood. See the details section for more information
about the possible likelihoods.</p></dd>


<dt>conf.level</dt>
<dd><p>a numeric value between 0 and 1 specifying the
confidence level (i.e., 1 - audit risk / detection risk).</p></dd>


<dt>N.units</dt>
<dd><p>a numeric value larger than 0 specifying the total
number of units in the population. Required for the <code>hypergeometric</code>
likelihood.</p></dd>


<dt>by</dt>
<dd><p>an integer larger than 0 specifying the increment
between acceptable sample sizes (e.g., <code>increment = 5</code> considers only
sample sizes of 5, 10, 15, ...).</p></dd>


<dt>max</dt>
<dd><p>an integer larger than 0 specifying the sample size at
which the algorithm terminates (e.g., <code>max = 100</code> will terminate the
algorithm at <em>n</em> = 100).</p></dd>


<dt>prior</dt>
<dd><p>a logical specifying whether to use a prior distribution,
or an object of class <code>jfaPrior</code> or <code>jfaPosterior</code>. If this
argument is specified as <code>FALSE</code> (default), the function performs
classical planning. If this argument is specified as <code>TRUE</code> or as a
prior from <code>auditPrior</code>, this function performs Bayesian planning
using a prior that is conjugate to the specified <code>likelihood</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An object of class <code>jfaPlanning</code> containing:</p>
<dl><dt>conf.level</dt>
<dd><p>a numeric value between 0 and 1 giving the confidence
  level.</p></dd>

<dt>x</dt>
<dd><p>a numeric value larger than, or equal to, 0 giving (the proportional
  sum of) the tolerable errors in the sample.</p></dd>

<dt>n</dt>
<dd><p>an integer larger than 0 giving the minimum sample size.</p></dd>

<dt>n_staged</dt>
<dd><p>in the case of a multi-stage sampling plan, an integer
  larger than 0 giving the minimum sample size per stage.</p></dd>

<dt>ub</dt>
<dd><p>a numeric value between 0 and 1 giving the expected upper bound.</p></dd>

<dt>precision</dt>
<dd><p>a numeric value between 0 and 1 giving the expected
  precision.</p></dd>

<dt>p.value</dt>
<dd><p>a numeric value giving the expected one-sided p-value.</p></dd>

<dt>K</dt>
<dd><p>if <code>likelihood = 'hypergeometric'</code>, an integer larger than 0
  giving the assumed population errors.</p></dd>

<dt>N.units</dt>
<dd><p>an integer larger than 0 giving the number of units in the
  population (only returned if <code>N.units</code> is specified).</p></dd>

<dt>materiality</dt>
<dd><p>a numeric value between 0 and 1 giving the performance
  materiality if specified.</p></dd>

<dt>min.precision</dt>
<dd><p>a numeric value between 0 and 1 giving the minimum
  precision if specified.</p></dd>

<dt>expected</dt>
<dd><p>a numeric value larger than, or equal to, 0 giving the
  expected misstatement input.</p></dd>

<dt>likelihood</dt>
<dd><p>a character indicating the likelihood.</p></dd>

<dt>errorType</dt>
<dd><p>a character indicating the expected misstatements input.</p></dd>

<dt>iterations</dt>
<dd><p>an integer giving the number of iterations of the
  algorithm.</p></dd>

<dt>prior</dt>
<dd><p>if a prior distribution is specified, an object of class
  <code>jfaPrior</code> that contains information about the prior distribution.</p></dd>

<dt>posterior</dt>
<dd><p>if a prior distribution is specified, an object of class
  <code>jfaPosterior</code> that contains information about the expected posterior
  distribution.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This section elaborates on the available input options for the
<code>likelihood</code> argument and the corresponding conjugate prior
distributions used by <code>jfa</code>.</p>
<ul><li><p><code>poisson</code>:        The Poisson distribution is an approximation of
   the binomial distribution. The Poisson distribution is defined as:
   $$f(\theta, n) = \frac{\lambda^\theta e^{-\lambda}}{\theta!}$$. The
   conjugate <em>gamma(\(\alpha, \beta\))</em> prior has probability density
   function:
   $$p(\theta; \alpha, \beta) = \frac{\beta^\alpha \theta^{\alpha - 1}
   e^{-\beta \theta}}{\Gamma(\alpha)}$$.</p></li>
<li><p><code>binomial</code>:       The binomial distribution is an approximation
 of the hypergeometric distribution. The binomial distribution is defined as:
 $$f(\theta, n, x) = {n \choose x} \theta^x (1 - \theta)^{n - x}$$. The
 conjugate <em>beta(\(\alpha, \beta\))</em> prior has probability density
 function: $$p(\theta; \alpha, \beta) = \frac{1}{B(\alpha, \beta)}
 \theta^{\alpha - 1} (1 - \theta)^{\beta - 1}$$.</p></li>
<li><p><code>hypergeometric</code>: The hypergeometric distribution is defined as:
 $$f(x, n, K, N) = \frac{{K \choose x} {N - K \choose n - x}}
 {{N \choose n}}$$. The conjugate <em>beta-binomial(\(\alpha, \beta\))</em>
 prior (Dyer and Pierce, 1993) has probability mass function:
 $$f(x, n, \alpha, \beta) = {n \choose x}
 \frac{B(x + \alpha, n - x + \beta)}{B(\alpha, \beta)}$$.</p></li>
</ul></div>
    <div id="references">
    <h2>References</h2>
    <p>Derks, K., de Swart, J., van Batenburg, P., Wagenmakers, E.-J.,
  &amp; Wetzels, R. (2021). Priors in a Bayesian audit: How integration of
  existing information into the prior distribution can improve audit
  transparency and efficiency. <em>International Journal of Auditing</em>,
  25(3), 621-636. <a href="https://doi.org/10.1111/ijau.12240" class="external-link">doi:10.1111/ijau.12240</a></p>
<p>Derks, K., de Swart, J., Wagenmakers, E.-J., Wille, J., &amp;
  Wetzels, R. (2021). JASP for audit: Bayesian tools for the auditing
  practice. <em>Journal of Open Source Software</em>, <em>6</em>(68), 2733.
  <a href="https://doi.org/10.21105/joss.02733" class="external-link">doi:10.21105/joss.02733</a></p>
<p>Dyer, D. and Pierce, R.L. (1993). On the choice of the prior
distribution in hypergeometric sampling. <em>Communications in Statistics -
Theory and Methods</em>, 22(8), 2125-2146. <a href="https://doi.org/10.1080/03610929308831139" class="external-link">doi:10.1080/03610929308831139</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="auditPrior.html">auditPrior</a></code>
         <code><a href="selection.html">selection</a></code>
         <code><a href="evaluation.html">evaluation</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Koen Derks, <a href="mailto:k.derks@nyenrode.nl">k.derks@nyenrode.nl</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Classical planning</span></span></span>
<span class="r-in"><span><span class="fu">planning</span><span class="op">(</span>materiality <span class="op">=</span> <span class="fl">0.03</span>, expected <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Classical Audit Sample Planning</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> minimum sample size = 100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sample size obtained in 101 iterations via method 'poisson'</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Classical two-stage planning</span></span></span>
<span class="r-in"><span><span class="fu">planning</span><span class="op">(</span>materiality <span class="op">=</span> <span class="fl">0.03</span>, expected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Classical Audit Sample Planning</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> minimum sample size = 210 (105 per stage) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sample size obtained in 104 iterations via method 'poisson' + 'sequential'</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bayesian planning using a default prior</span></span></span>
<span class="r-in"><span><span class="fu">planning</span><span class="op">(</span>materiality <span class="op">=</span> <span class="fl">0.03</span>, prior <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Bayesian Audit Sample Planning</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> minimum sample size = 99 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sample size obtained in 100 iterations via method 'poisson' + 'prior'</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bayesian planning using a custom prior</span></span></span>
<span class="r-in"><span><span class="va">prior</span> <span class="op">&lt;-</span> <span class="fu"><a href="auditPrior.html">auditPrior</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"impartial"</span>, materiality <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">planning</span><span class="op">(</span>materiality <span class="op">=</span> <span class="fl">0.05</span>, prior <span class="op">=</span> <span class="va">prior</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 	Bayesian Audit Sample Planning</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> minimum sample size = 47 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sample size obtained in 48 iterations via method 'poisson' + 'prior'</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://koenderks.com" class="external-link">Koen Derks</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

